---
title: "停止等待ARQ协议和连续ARQ协议"
tags: TeXt
---

# 停止等待ARQ协议
在TCP层以下都不保证数据的可靠性传输。所以，TCP协议要保证数据的可靠性。接收到可靠性的数据需要满足以下两个方面：
### （1）接收到的数据是没有发生错误的。
### （2）接收端能够及时对数据进行处理。
## TCP如何保证可靠性？最初采用的是停止等待ARQ协议
基本的工作原理：发送端发送数据给接收端，接收端收到数据后进行回应，发送端确认拿到接收端的数据之后才进行下一个分组的发送。
如下图：
![]({{site.url}}/assets/blogImages/blog013/13-1.png)
### 工作原理——如何保证可靠性？
#### （1）确认无差错传输
发送方每传一个分组，就会打开一个定时器，在定时器截止之前，如果接收不到确认消息就会进行重传。当接收方发现传过来的数据是错误时，他就不会传确认的消息给发送方。当定时器时间截止时，发送方重传一个数据。
#### （2）发送数据包或确认数据包丢失
发送数据包丢失，定时器已截止，发送方会重传一个数据包；确认数据包丢失，由于发送端没有在规定的时间收到数据以为发送分组丢失又会重传数据。接收方收到重复的分组后丢失。
#### （3）发送数据包迟到
发送数据包由于网络延迟没有在规定的时间到达接收端，发送端会再次发送数据然后等到确认，当迟到的数据包到达接收端时，接收端会丢掉重复的数据包，再发一次确认给发送端。
###### 思考：为什么发送数据包和确认数据包都需要进行编号？
# 连续ARQ协议
由于停止等待ARQ协议发送端要接收到确认才能发送下一个分组，信道的利用率很低，所以我们经过改进产生了连续ARQ协议。
## ARQ协议的基本内容
连续发送几个分组，不需要等待这几个分组每个的确认，接收端只要发送最后一个正确的分组的确认给发送方，发送方就知道确认分组的前几个分组是正确的，就无需发送，只需发送没有确认的后几个分组。